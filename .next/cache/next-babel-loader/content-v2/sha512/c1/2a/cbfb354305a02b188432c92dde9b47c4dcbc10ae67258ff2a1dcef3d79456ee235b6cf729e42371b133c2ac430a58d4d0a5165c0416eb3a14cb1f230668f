{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect } from 'react';\nimport Head from \"next/head\";\nimport { useRouter, Router } from 'next/router';\nimport Breadcrumbs from '../breadcrumbs';\nimport PageOverlay from 'components/page-overlay/page-overlay';\nimport { GetBreadcrumbsSchema, GetSerializedSchema } from 'helpers/schemaHelper';\nimport LiveChat from \"../../live-chat\";\nimport { isWithinLeaseBotHours } from \"../../leasebot/helper\";\nimport { AuthenticationService } from \"business-logic/authenticationService\";\nimport { connect } from 'react-redux';\nimport { getBreadcrumbs } from \"helpers/breadcrumbsHelper\";\nimport Header from '../header';\nimport Footer from '../footer';\nimport ToTop from '../to-top';\nimport LeaseBotIcon from 'components/leasebot/leaseBotIcon';\nimport { GetTrustPilotRating } from 'business-logic/systemService';\n\nconst MainLayout = ({\n  isInternal,\n  dispatchInternalCheck,\n  metaData,\n  breadcrumbs,\n  children,\n  className,\n  trustPilotRating,\n  updateTrustPilotRating\n}) => {\n  const router = useRouter();\n  const expiryDate = new Date();\n  expiryDate.setFullYear(expiryDate.getFullYear() + 1);\n\n  const checkChatStatus = () => {\n    var liveChat = document.getElementById(\"liveChatLink\");\n    var chatWrapper = document.getElementById(\"chatwrapper\");\n\n    if (isWithinLeaseBotHours()) {\n      if (process.env.NEXT_PUBLIC_IS_CHATBOT_ENABLED) {\n        chatWrapper === null || chatWrapper === void 0 ? void 0 : chatWrapper.classList.remove(\"d-none\");\n      }\n\n      liveChat === null || liveChat === void 0 ? void 0 : liveChat.classList.add(\"d-none\");\n    } else {\n      chatWrapper === null || chatWrapper === void 0 ? void 0 : chatWrapper.classList.add(\"d-none\");\n      liveChat === null || liveChat === void 0 ? void 0 : liveChat.classList.remove(\"d-none\");\n    }\n  };\n\n  useEffect(() => {\n    // Check for internal user on first pageload\n    checkInternalIp();\n    checkTrustpilot(); // Check for internal user on first route change\n\n    Router.events.on('routeChangeComplete', () => {\n      checkInternalIp();\n      checkTrustpilot();\n    });\n  }, []);\n\n  const checkTrustpilot = () => {\n    if (trustPilotRating == null) {\n      GetTrustPilotRating().then(response => {\n        updateTrustPilotRating(response.data);\n      });\n    }\n  };\n\n  useEffect(() => {\n    // Check chat status\n    // ! This is required otherwise there's a delay in showing the cirrect chat\n    checkChatStatus(); // Check chat repeater\n\n    const interval = setInterval(checkChatStatus, 15000);\n    return () => clearInterval(interval);\n  }, []);\n\n  function checkInternalIp() {\n    if (isInternal === null) {\n      AuthenticationService.IsInternalPage().then(result => {\n        dispatchInternalCheck(result.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }\n\n  var breadcrumbs = getBreadcrumbs(router);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [metaData ? /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"title\", {\n          children: metaData.title\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          name: \"description\",\n          content: metaData.description\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          name: \"keywords\",\n          content: metaData.keywords\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"og:type\",\n          content: \"website\"\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"og:url\",\n          content: process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"og:title\",\n          content: metaData.title\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"og:description\",\n          content: metaData.description\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"og:image\",\n          content: metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"twitter:card\",\n          content: \"summary_large_image\"\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"twitter:url\",\n          content: process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"twitter:title\",\n          content: metaData.title\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"twitter:description\",\n          content: metaData.description\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"twitter:image\",\n          content: metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"\n        })]\n      }) : null, metaData && metaData.canonicalUrl ? /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(\"link\", {\n          rel: \"canonical\",\n          href: metaData.canonicalUrl\n        })\n      }) : null, metaData && metaData.ampHTML ? /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(\"link\", {\n          rel: \"amphtml\",\n          href: metaData.ampHTML\n        })\n      }) : null, metaData && metaData.noIndex ? /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(\"meta\", {\n          name: \"robots\",\n          content: \"noindex,nofollow\"\n        })\n      }) : null, metaData && metaData.author ? /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(\"meta\", {\n          name: \"author\",\n          content: metaData.author\n        })\n      }) : null, breadcrumbs && breadcrumbs.length > 0 ? /*#__PURE__*/_jsx(\"script\", {\n        type: \"application/ld+json\",\n        dangerouslySetInnerHTML: {\n          __html: GetSerializedSchema(GetBreadcrumbsSchema(breadcrumbs))\n        }\n      }) : null, process.env.NEXT_PUBLIC_TAGMANAGER_ENABLED == \"true\" && /*#__PURE__*/_jsx(\"script\", {\n        type: \"application/javascript\",\n        dangerouslySetInnerHTML: {\n          __html: `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PG5CHN');`\n        }\n      })]\n    }), /*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(Breadcrumbs, {\n      breadcrumbs: breadcrumbs\n    }), /*#__PURE__*/_jsx(\"main\", {\n      className: className,\n      children: children\n    }), /*#__PURE__*/_jsx(Footer, {}), /*#__PURE__*/_jsx(ToTop, {}), /*#__PURE__*/_jsx(PageOverlay, {}), /*#__PURE__*/_jsx(LeaseBotIcon, {}), /*#__PURE__*/_jsx(LiveChat, {})]\n  });\n};\n\nconst mapStateToProps = state => ({\n  isInternal: state.isInternal,\n  trustPilotRating: state.trustPilotRating\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dispatchInternalCheck: internal => {\n      dispatch({\n        type: \"UPDATE_INTERNAL\",\n        internal: internal\n      });\n    },\n    updateTrustPilotRating: data => {\n      dispatch({\n        type: 'UPDATE_TRUSTPILOT_RATING',\n        data: data\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainLayout);","map":null,"metadata":{},"sourceType":"module"}