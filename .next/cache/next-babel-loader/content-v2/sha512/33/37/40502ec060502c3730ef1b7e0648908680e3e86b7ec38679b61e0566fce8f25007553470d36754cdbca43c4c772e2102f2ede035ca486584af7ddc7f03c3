{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\current_project\\\\PPH\\\\tfs\\\\Website\\\\Website\\\\components\\\\layout\\\\main-layout\\\\main-layout.tsx\";\nimport React, { useEffect } from 'react';\nimport Head from \"next/head\";\nimport { useRouter, Router } from 'next/router';\nimport Breadcrumbs from '../breadcrumbs';\nimport PageOverlay from 'components/page-overlay/page-overlay';\nimport { GetBreadcrumbsSchema, GetSerializedSchema } from 'helpers/schemaHelper';\nimport LiveChat from \"../../live-chat\";\nimport { isWithinLeaseBotHours } from \"../../leasebot/helper\";\nimport { AuthenticationService } from \"business-logic/authenticationService\";\nimport { connect } from 'react-redux';\nimport { getBreadcrumbs } from \"helpers/breadcrumbsHelper\";\nimport Header from '../header';\nimport Footer from '../footer';\nimport ToTop from '../to-top';\nimport LeaseBotIcon from 'components/leasebot/leaseBotIcon';\nimport { GetTrustPilotRating } from 'business-logic/systemService';\n\nconst MainLayout = ({\n  isInternal,\n  dispatchInternalCheck,\n  metaData,\n  breadcrumbs,\n  children,\n  className,\n  trustPilotRating,\n  updateTrustPilotRating\n}) => {\n  const router = useRouter();\n  const expiryDate = new Date();\n  expiryDate.setFullYear(expiryDate.getFullYear() + 1);\n\n  const checkChatStatus = () => {\n    var liveChat = document.getElementById(\"liveChatLink\");\n    var chatWrapper = document.getElementById(\"chatwrapper\");\n\n    if (isWithinLeaseBotHours()) {\n      if (process.env.NEXT_PUBLIC_IS_CHATBOT_ENABLED) {\n        chatWrapper === null || chatWrapper === void 0 ? void 0 : chatWrapper.classList.remove(\"d-none\");\n      }\n\n      liveChat === null || liveChat === void 0 ? void 0 : liveChat.classList.add(\"d-none\");\n    } else {\n      chatWrapper === null || chatWrapper === void 0 ? void 0 : chatWrapper.classList.add(\"d-none\");\n      liveChat === null || liveChat === void 0 ? void 0 : liveChat.classList.remove(\"d-none\");\n    }\n  };\n\n  useEffect(() => {\n    // Check for internal user on first pageload\n    checkInternalIp();\n    checkTrustpilot(); // Check for internal user on first route change\n\n    Router.events.on('routeChangeComplete', () => {\n      checkInternalIp();\n      checkTrustpilot();\n    });\n  }, []);\n\n  const checkTrustpilot = () => {\n    if (trustPilotRating == null) {\n      GetTrustPilotRating().then(response => {\n        updateTrustPilotRating(response.data);\n      });\n    }\n  };\n\n  useEffect(() => {\n    // Check chat status\n    // ! This is required otherwise there's a delay in showing the cirrect chat\n    checkChatStatus(); // Check chat repeater\n\n    const interval = setInterval(checkChatStatus, 15000);\n    return () => clearInterval(interval);\n  }, []);\n\n  function checkInternalIp() {\n    if (isInternal === null) {\n      AuthenticationService.IsInternalPage().then(result => {\n        dispatchInternalCheck(result.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }\n\n  var breadcrumbs = getBreadcrumbs(router);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [metaData ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"title\", {\n          children: metaData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"description\",\n          content: metaData.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"keywords\",\n          content: metaData.keywords\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"og:type\",\n          content: \"website\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"og:url\",\n          content: process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"og:title\",\n          content: metaData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"og:description\",\n          content: metaData.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"og:image\",\n          content: metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"twitter:card\",\n          content: \"summary_large_image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"twitter:url\",\n          content: process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"twitter:title\",\n          content: metaData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"twitter:description\",\n          content: metaData.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"twitter:image\",\n          content: metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : null, metaData && metaData.canonicalUrl ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"canonical\",\n          href: metaData.canonicalUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }, this)\n      }, void 0, false) : null, metaData && metaData.ampHTML ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"amphtml\",\n          href: metaData.ampHTML\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }, this)\n      }, void 0, false) : null, metaData && metaData.noIndex ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"robots\",\n          content: \"noindex,nofollow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }, this)\n      }, void 0, false) : null, metaData && metaData.author ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"author\",\n          content: metaData.author\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }, this)\n      }, void 0, false) : null, breadcrumbs && breadcrumbs.length > 0 ? /*#__PURE__*/_jsxDEV(\"script\", {\n        type: \"application/ld+json\",\n        dangerouslySetInnerHTML: {\n          __html: GetSerializedSchema(GetBreadcrumbsSchema(breadcrumbs))\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 61\n      }, this) : null, process.env.NEXT_PUBLIC_TAGMANAGER_ENABLED == \"true\" && /*#__PURE__*/_jsxDEV(\"script\", {\n        type: \"application/javascript\",\n        dangerouslySetInnerHTML: {\n          __html: `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PG5CHN');`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Breadcrumbs, {\n      breadcrumbs: breadcrumbs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: className,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToTop, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PageOverlay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(LeaseBotIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(LiveChat, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\nconst mapStateToProps = state => ({\n  isInternal: state.isInternal,\n  trustPilotRating: state.trustPilotRating\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dispatchInternalCheck: internal => {\n      dispatch({\n        type: \"UPDATE_INTERNAL\",\n        internal: internal\n      });\n    },\n    updateTrustPilotRating: data => {\n      dispatch({\n        type: 'UPDATE_TRUSTPILOT_RATING',\n        data: data\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainLayout);","map":{"version":3,"sources":["E:/current_project/PPH/tfs/Website/Website/components/layout/main-layout/main-layout.tsx"],"names":["React","useEffect","Head","useRouter","Router","Breadcrumbs","PageOverlay","GetBreadcrumbsSchema","GetSerializedSchema","LiveChat","isWithinLeaseBotHours","AuthenticationService","connect","getBreadcrumbs","Header","Footer","ToTop","LeaseBotIcon","GetTrustPilotRating","MainLayout","isInternal","dispatchInternalCheck","metaData","breadcrumbs","children","className","trustPilotRating","updateTrustPilotRating","router","expiryDate","Date","setFullYear","getFullYear","checkChatStatus","liveChat","document","getElementById","chatWrapper","process","env","NEXT_PUBLIC_IS_CHATBOT_ENABLED","classList","remove","add","checkInternalIp","checkTrustpilot","events","on","then","response","data","interval","setInterval","clearInterval","IsInternalPage","result","catch","error","console","log","title","description","keywords","NEXT_PUBLIC_CANONICALBASEURL","asPath","imageUrl","NEXT_PUBLIC_CDN","canonicalUrl","ampHTML","noIndex","author","length","__html","NEXT_PUBLIC_TAGMANAGER_ENABLED","mapStateToProps","state","mapDispatchToProps","dispatch","internal","type"],"mappings":"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","sourcesContent":["import React, { ReactNode, useState, useEffect } from 'react';\r\nimport Head from \"next/head\";\r\nimport { useRouter, Router } from 'next/router'\r\nimport Breadcrumbs from '../breadcrumbs';\r\nimport PageOverlay from 'components/page-overlay/page-overlay';\r\nimport { MetaData } from 'types/infrastructure/MetaData';\r\nimport { BreadcrumbsItem } from 'types/infrastructure/BreadcrumbsItem';\r\nimport { GetBreadcrumbsSchema, GetSerializedSchema } from 'helpers/schemaHelper';\r\nimport LiveChat from \"../../live-chat\";\r\nimport { isWithinLeaseBotHours } from \"../../leasebot/helper\";\r\nimport { AuthenticationService } from \"business-logic/authenticationService\";\r\nimport { connect } from 'react-redux';\r\nimport { getBreadcrumbs } from \"helpers/breadcrumbsHelper\";\r\nimport Header from '../header';\r\nimport Footer from '../footer';\r\nimport TrustMicro from 'components/trustpilot/trust-micro';\r\nimport ToTop from '../to-top';\r\nimport CookieBar from '../../cookie-bar/cookie-bar';\r\nimport LeaseBotIcon from 'components/leasebot/leaseBotIcon';\r\nimport { GetTrustPilotRating } from 'business-logic/systemService';\r\n\r\ntype Props = {\r\n    isInternal: boolean;\r\n    dispatchInternalCheck: any;\r\n    metaData?: MetaData;\r\n    breadcrumbs?: BreadcrumbsItem[];\r\n    children: ReactNode;\r\n    className?: string;    \r\n    trustPilotRating: any,\r\n    updateTrustPilotRating: any,\r\n}\r\n\r\nconst MainLayout: React.FC<Props> = ({ isInternal, dispatchInternalCheck, metaData, breadcrumbs, children, className, trustPilotRating, updateTrustPilotRating }) => {\r\n    const router = useRouter();\r\n    const expiryDate = new Date();\r\n          expiryDate.setFullYear(expiryDate.getFullYear() + 1);\r\n\r\n    const checkChatStatus = () => {\r\n        var liveChat = document.getElementById(\"liveChatLink\");\r\n        var chatWrapper = document.getElementById(\"chatwrapper\");\r\n\r\n        if (isWithinLeaseBotHours()) {\r\n            if (process.env.NEXT_PUBLIC_IS_CHATBOT_ENABLED) {\r\n                chatWrapper?.classList.remove(\"d-none\");\r\n            }\r\n            liveChat?.classList.add(\"d-none\");\r\n        } else {\r\n            chatWrapper?.classList.add(\"d-none\");\r\n            liveChat?.classList.remove(\"d-none\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Check for internal user on first pageload\r\n        checkInternalIp();\r\n        checkTrustpilot();\r\n        // Check for internal user on first route change\r\n        Router.events.on('routeChangeComplete', () => {\r\n            checkInternalIp();\r\n            checkTrustpilot();\r\n        });\r\n    }, []);\r\n\r\n    const checkTrustpilot = () => {\r\n        if (trustPilotRating == null) {\r\n            GetTrustPilotRating().then(response => {\r\n                updateTrustPilotRating(response.data);                 \r\n            });\r\n        }   \r\n    };\r\n\r\n    useEffect(() => {\r\n        // Check chat status\r\n        // ! This is required otherwise there's a delay in showing the cirrect chat\r\n        checkChatStatus();\r\n\r\n        // Check chat repeater\r\n        const interval = setInterval(checkChatStatus, 15000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    function checkInternalIp() {\r\n        if (isInternal === null) {\r\n            AuthenticationService.IsInternalPage()\r\n                .then(result => {\r\n                    dispatchInternalCheck(result.data);\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n        }\r\n    }\r\n\r\n    var breadcrumbs = getBreadcrumbs(router);\r\n\r\n    return (\r\n        <>\r\n            <Head>\r\n                {metaData ?\r\n                    (<>\r\n                        <title>{metaData.title}</title>\r\n                        <meta name=\"description\" content={metaData.description} />\r\n                        <meta name=\"keywords\" content={metaData.keywords} />\r\n\r\n                        {/* Open Graph / Facebook */}\r\n                        <meta property=\"og:type\" content=\"website\" />\r\n                        <meta property=\"og:url\" content={process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath} />\r\n                        <meta property=\"og:title\" content={metaData.title} />\r\n                        <meta property=\"og:description\" content={metaData.description} />\r\n                        <meta property=\"og:image\" content={metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"} />\r\n\r\n                        {/* Twitter */}\r\n                        <meta property=\"twitter:card\" content=\"summary_large_image\" />\r\n                        <meta property=\"twitter:url\" content={process.env.NEXT_PUBLIC_CANONICALBASEURL + router.asPath} />\r\n                        <meta property=\"twitter:title\" content={metaData.title} />\r\n                        <meta property=\"twitter:description\" content={metaData.description} />\r\n                        <meta property=\"twitter:image\" content={metaData.imageUrl ? metaData.imageUrl : process.env.NEXT_PUBLIC_CDN + \"/fit-in/400x400/website/static/img-placeholder.jpg\"} />\r\n                    </>) : null}\r\n\r\n                {(metaData && metaData.canonicalUrl) ?\r\n                    (<>\r\n                        <link rel=\"canonical\" href={metaData.canonicalUrl} />\r\n                    </>) : null}\r\n\r\n                {(metaData && metaData.ampHTML) ?\r\n                    (<>\r\n                        <link rel=\"amphtml\" href={metaData.ampHTML} />\r\n                    </>) : null}\r\n\r\n                {(metaData && metaData.noIndex) ?\r\n                    (<>\r\n                        <meta name=\"robots\" content=\"noindex,nofollow\" />\r\n                    </>) : null}\r\n\r\n                {(metaData && metaData.author) ?\r\n                    (<>\r\n                        <meta name=\"author\" content={metaData.author} />\r\n                    </>) : null}\r\n\r\n                {(breadcrumbs && breadcrumbs.length > 0) ? (<script type=\"application/ld+json\" dangerouslySetInnerHTML={{\r\n                    __html: GetSerializedSchema(GetBreadcrumbsSchema(breadcrumbs))\r\n                }}></script>) : null}\r\n\r\n                {process.env.NEXT_PUBLIC_TAGMANAGER_ENABLED == \"true\" &&\r\n                    <script type=\"application/javascript\" dangerouslySetInnerHTML={\r\n                        {\r\n                            __html: `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PG5CHN');`,\r\n                        }\r\n                    }>\r\n                    </script>\r\n                }\r\n            </Head>\r\n\r\n            <Header />\r\n            <Breadcrumbs\r\n                breadcrumbs={breadcrumbs}\r\n            />\r\n          \r\n           \r\n            <main className={className}>{children}</main>\r\n            <Footer />\r\n            <ToTop />\r\n            <PageOverlay />\r\n            <LeaseBotIcon/>\r\n            <LiveChat />\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isInternal: state.isInternal,\r\n    trustPilotRating: state.trustPilotRating,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        dispatchInternalCheck: (internal: boolean) => {\r\n            dispatch({ type: \"UPDATE_INTERNAL\", internal: internal });\r\n        },\r\n        updateTrustPilotRating: (data) => {\r\n            dispatch({ type: 'UPDATE_TRUSTPILOT_RATING', data: data });\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainLayout);"]},"metadata":{},"sourceType":"module"}