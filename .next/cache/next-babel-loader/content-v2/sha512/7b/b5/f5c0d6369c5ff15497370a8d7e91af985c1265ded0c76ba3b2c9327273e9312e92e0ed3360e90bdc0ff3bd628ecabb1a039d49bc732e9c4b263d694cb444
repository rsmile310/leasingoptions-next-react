{"ast":null,"code":"import _regeneratorRuntime from \"E:/current_project/PPH/tfs/Website/website/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"E:/current_project/PPH/tfs/Website/website/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState } from 'react';\nimport style from 'sass/single-post.module.scss';\nimport MetaHead from '../../../../components/seo/meta';\nimport MainLayout from '../../../../components/layout/main-layout';\nimport Newsletter from '../../../../components/layout/newsletter';\nimport AsideNews from '../../../../components/layout/aside-news';\nimport PageRelated from '../../../../components/layout/page-related';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faThumbsUp, faThumbsDown } from \"@fortawesome/pro-regular-svg-icons\";\nimport { InlineShareButtons } from 'sharethis-reactjs';\nimport { NewsTypes } from 'enums/NewsTypes';\nimport { ContentService } from 'business-logic/contentService';\nimport moment from 'moment';\n\nvar NewsPost = function NewsPost(_ref) {\n  var category = _ref.category,\n      newsId = _ref.newsId,\n      newsType = _ref.newsType,\n      newsArticle = _ref.newsArticle,\n      popularNews = _ref.popularNews,\n      relatedNews = _ref.relatedNews,\n      webPageSchema = _ref.webPageSchema;\n\n  var _useState = useState(newsArticle.likesCount),\n      likeCount = _useState[0],\n      setLikeCount = _useState[1];\n\n  var _useState2 = useState(newsArticle.dislikesCount),\n      dislikeCount = _useState2[0],\n      setDisikeCount = _useState2[1];\n\n  var cardImage = newsArticle.imageUrl ? newsArticle.imageUrl : \"/fit-in/400x400/website/static/img-placeholder.jpg\";\n  var momentDate = moment(newsArticle.onDate, \"YYYY-MM-DDTHH:mm\");\n  var formattedDate = momentDate.format(\"DD MMMM YYYY\");\n\n  var handleIncrementLikes = function handleIncrementLikes(newsId) {\n    //TODO: ADD check for user IP\n    Promise.resolve(IncrementLikes(newsId)).then(function (data) {\n      setLikeCount(likeCount + 1);\n    });\n  };\n\n  var handleIncrementDislikes = function handleIncrementDislikes(newsId) {\n    //TODO: ADD check for user IP\n    Promise.resolve(IncrementDislikes(newsId)).then(function (data) {\n      setDisikeCount(dislikeCount + 1);\n    });\n  };\n\n  function IncrementLikes(_x) {\n    return _IncrementLikes.apply(this, arguments);\n  }\n\n  function _IncrementLikes() {\n    _IncrementLikes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(newsId) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return ContentService.IncrementLikes(newsId);\n\n            case 2:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _IncrementLikes.apply(this, arguments);\n  }\n\n  function IncrementDislikes(_x2) {\n    return _IncrementDislikes.apply(this, arguments);\n  }\n\n  function _IncrementDislikes() {\n    _IncrementDislikes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newsId) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return ContentService.IncrementDislikes(newsId);\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _IncrementDislikes.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(MetaHead, {\n      children: /*#__PURE__*/_jsx(\"script\", {\n        type: \"application/ld+json\",\n        dangerouslySetInnerHTML: {\n          __html: webPageSchema\n        }\n      })\n    }), /*#__PURE__*/_jsx(\"section\", {\n      className: \"bg-light-grey py-3 py-md-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row d-flex\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-lg-18 order-2 order-lg-1\",\n            children: /*#__PURE__*/_jsxs(\"article\", {\n              className: style['single-post'],\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: style['single-post__img'],\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  className: \"img-fluid lazyload\",\n                  alt: \"\".concat(newsArticle.title, \" image\"),\n                  \"data-src\": \"\".concat(process.env.NEXT_PUBLIC_CDN + cardImage)\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: style['single-post__info'],\n                children: [/*#__PURE__*/_jsx(\"h1\", {\n                  children: newsArticle.title\n                }), /*#__PURE__*/_jsx(\"span\", {\n                  children: formattedDate\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"w-100 position-relative\",\n                  dangerouslySetInnerHTML: {\n                    __html: newsArticle.newsText\n                  }\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: style['single-post__tags'],\n                children: [newsArticle.tags.length > 0 && /*#__PURE__*/_jsxs(\"ul\", {\n                  children: [/*#__PURE__*/_jsx(\"li\", {\n                    className: \"tag-label\",\n                    children: \"Tags\"\n                  }), newsArticle.tags.map(function (tag) {\n                    return /*#__PURE__*/_jsx(\"li\", {\n                      children: tag\n                    }, \"tag-\".concat(tag));\n                  })]\n                }), /*#__PURE__*/_jsx(\"hr\", {})]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"\".concat(style['single-post__social'], \" d-lg-flex align-items-center justify-content-center\"),\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"\".concat(style['single-post__rate'], \" d-inline-flex flex-wrap align-items-lg-center justify-content-center justify-content-lg-start\"),\n                  children: [/*#__PURE__*/_jsx(\"h4\", {\n                    children: \"Enjoy this article?\"\n                  }), /*#__PURE__*/_jsxs(\"a\", {\n                    className: \"\".concat(style['single-post__thumb'], \" \").concat(style['single-post__thumb--left']),\n                    children: [/*#__PURE__*/_jsx(\"span\", {\n                      children: likeCount\n                    }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      width: \"30\",\n                      height: \"30\",\n                      icon: faThumbsUp,\n                      onClick: function onClick() {\n                        return handleIncrementLikes(newsId);\n                      }\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"a\", {\n                    className: \"\".concat(style['single-post__thumb'], \" \").concat(style['single-post__thumb--right']),\n                    children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      width: \"30\",\n                      height: \"30\",\n                      icon: faThumbsDown,\n                      onClick: function onClick() {\n                        return handleIncrementDislikes(newsId);\n                      }\n                    }), /*#__PURE__*/_jsx(\"span\", {\n                      children: dislikeCount\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"\".concat(style['single-post__share'], \" d-inline-flex flex-wrap align-items-lg-center justify-content-center justify-content-lg-end\"),\n                  children: /*#__PURE__*/_jsx(InlineShareButtons, {\n                    config: {\n                      alignment: 'center',\n                      // alignment of buttons (left, center, right)\n                      color: 'social',\n                      // set the color of buttons (social, white)\n                      enabled: true,\n                      // show/hide buttons (true, false)\n                      font_size: 10,\n                      // font size for the buttons\n                      labels: 'cta',\n                      // button labels (cta, counts, null)\n                      language: 'en',\n                      // which language to use (see LANGUAGES)\n                      networks: [// which networks to include (see SHARING NETWORKS)\n                      'facebook', 'twitter', 'linkedin'],\n                      padding: 12,\n                      // padding within buttons (INTEGER)\n                      radius: 0,\n                      // the corner radius on each button (INTEGER)\n                      show_total: false,\n                      size: 26 // the size of each button (INTEGER)\n\n                    }\n                  })\n                })]\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-24 col-lg-6 order-1 order-lg-2\",\n            children: /*#__PURE__*/_jsx(AsideNews, {\n              popular: true,\n              filters: newsType === NewsTypes.VehicleReviews,\n              social: true,\n              popularNews: popularNews,\n              newsType: newsType,\n              category: category\n            })\n          })]\n        })\n      })\n    }), relatedNews.length > 0 && /*#__PURE__*/_jsx(PageRelated, {\n      relatedNews: relatedNews\n    }), /*#__PURE__*/_jsx(Newsletter, {})]\n  });\n};\n\nNewsPost.layout = MainLayout;\nexport var __N_SSP = true;\nexport default NewsPost;","map":null,"metadata":{},"sourceType":"module"}