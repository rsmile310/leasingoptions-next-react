{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSpinner } from \"@fortawesome/pro-regular-svg-icons\";\nimport { GarageActionTypes } from 'enums/GarageActionTypes';\nimport { EmailAddressIsValid } from 'helpers/validation';\nimport { GarageService } from 'business-logic/garageService';\n\nconst GarageSaveForm = ({\n  settings\n}) => {\n  var _errors$email;\n\n  const methods = useForm();\n  const {\n    register,\n    handleSubmit,\n    errors,\n    reset\n  } = methods;\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n\n  const onSubmit = formData => {\n    if (!settings.isDisabled && !isLoading) {\n      setIsLoading(true);\n      const data = {\n        actionType: GarageActionTypes.Save,\n        email: formData.email,\n        vehicles: settings.getData().vehicles\n      };\n      GarageService.GarageAction(data).then(result => {\n        setIsLoading(false);\n\n        if (result.isSucceed) {\n          reset();\n          alert(\"Thank you! Your garage has been saved, to retrieve, please check your email.\");\n        } else {\n          alert(\"Failed to save garage.\");\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"w-100 box bg-white p-0\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"box__header\",\n      children: \"Save for later\"\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"box__content\",\n      children: /*#__PURE__*/_jsxs(\"form\", {\n        className: \"row\",\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-24 form-group\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"emailSave\",\n            children: \"Email Address *\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"email\",\n            className: `form-control ${errors.email ? \"is-invalid\" : \"\"}`,\n            id: \"emailSave\",\n            name: \"email\",\n            \"aria-describedby\": \"email\",\n            placeholder: \"E.g. johnsmith@website.co.uk\",\n            maxLength: 50,\n            ref: register({\n              required: 'Email is required.',\n              validate: value => EmailAddressIsValid(value) === true || 'Email is invalid.'\n            })\n          }), errors.email ? /*#__PURE__*/_jsx(\"span\", {\n            className: \"invalid-feedback d-block\",\n            children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n          }) : null]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-24\",\n          children: /*#__PURE__*/_jsx(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-outline-secondary btn-lg btn-fluid btn-block\",\n            disabled: settings.isDisabled,\n            children: isLoading ? /*#__PURE__*/_jsx(FontAwesomeIcon, {\n              width: \"16\",\n              height: \"16\",\n              icon: faSpinner,\n              className: \"fa-spin\"\n            }) : \"Save My Garage\"\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default GarageSaveForm;","map":null,"metadata":{},"sourceType":"module"}